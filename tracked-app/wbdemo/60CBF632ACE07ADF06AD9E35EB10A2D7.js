Object.defineProperty(exports, "__esModule", {
    value: !0
}), exports.default = function(r, e, h, n) {
    var l, f, b, M, g, s, x, i, p, u, w, c, v, d, C, _, j, k, m, q, y, O, P, z, A, B = r.data, D = n + n + 1, E = e - 1, F = h - 1, G = n + 1, H = G * (G + 1) / 2, I = new o(), J = I;
    for (b = 1; b < D; b++) J.next = new o(), J = J.next, b === G && (A = J);
    J.next = I;
    var K = null, L = null;
    x = s = 0;
    var N = t[n], Q = a[n];
    for (f = 0; f < h; f++) {
        for (_ = 0, j = 0, k = 0, m = 0, i = 0, p = 0, u = 0, w = 0, c = G * (q = B[s]), 
        v = G * (y = B[s + 1]), d = G * (O = B[s + 2]), C = G * (P = B[s + 3]), i += H * q, 
        p += H * y, u += H * O, w += H * P, J = I, b = 0; b < G; b++) J.r = q, J.g = y, 
        J.b = O, J.a = P, J = J.next;
        for (b = 1; b < G; b++) q = B[M = s + 4 * (E < b ? E : b)], J.r = q, i += J.r * (z = G - b), 
        y = B[M + 1], J.g = y, p += J.g * z, O = B[M + 2], J.b = O, u += J.b * z, P = B[M + 3], 
        J.a = P, w += J.a * z, _ += q, j += y, k += O, m += P, J = J.next;
        for (K = I, L = A, l = 0; l < e; l++) P = Math.floor(w * N / Math.pow(2, Q)), B[s + 3] = P, 
        0 !== P ? (P = 255 / P, B[s] = Math.floor(i * N / Math.pow(2, Q)) * P, B[s + 1] = Math.floor(p * N / Math.pow(2, Q)) * P, 
        B[s + 2] = Math.floor(u * N / Math.pow(2, Q)) * P) : (B[s] = 0, B[s + 1] = 0, B[s + 2] = 0), 
        i -= c, p -= v, u -= d, w -= C, c -= K.r, v -= K.g, d -= K.b, C -= K.a, M = 4 * (x + ((M = l + n + 1) < E ? M : E)), 
        K.r = B[M], _ += K.r, K.g = B[M + 1], j += K.g, K.b = B[M + 2], k += K.b, K.a = B[M + 3], 
        m += K.a, i += _, p += j, u += k, w += m, K = K.next, q = L.r, c += q, y = L.g, 
        v += y, O = L.b, d += O, P = L.a, C += P, _ -= q, j -= y, k -= O, m -= P, L = L.next, 
        s += 4;
        x += e;
    }
    for (l = 0; l < e; l++) {
        for (j = 0, k = 0, m = 0, _ = 0, p = 0, u = 0, w = 0, i = 0, c = G * (q = B[s = 4 * l]), 
        v = G * (y = B[s + 1]), d = G * (O = B[s + 2]), C = G * (P = B[s + 3]), i += H * q, 
        p += H * y, u += H * O, w += H * P, J = I, b = 0; b < G; b++) J.r = q, J.g = y, 
        J.b = O, J.a = P, J = J.next;
        for (g = e, b = 1; b <= n; b++) q = B[s = 4 * (g + l)], J.r = q, i += J.r * (z = G - b), 
        y = B[s + 1], J.g = y, p += J.g * z, O = B[s + 2], J.b = O, u += J.b * z, P = B[s + 3], 
        J.a = P, w += J.a * z, _ += q, j += y, k += O, m += P, J = J.next, b < F && (g += e);
        for (s = l, K = I, L = A, f = 0; f < h; f++) M = 4 * s, P = Math.floor(w * N / Math.pow(2, Q)), 
        B[M + 3] = P, P > 0 ? (P = 255 / P, B[M] = Math.floor(i * N / Math.pow(2, Q)) * P, 
        B[M + 1] = Math.floor(p * N / Math.pow(2, Q)) * P, B[M + 2] = Math.floor(u * N / Math.pow(2, Q)) * P) : (B[M] = 0, 
        B[M + 1] = 0, B[M + 2] = 0), i -= c, p -= v, u -= d, w -= C, c -= K.r, v -= K.g, 
        d -= K.b, C -= K.a, M = 4 * (l + ((M = f + G) < F ? M : F) * e), K.r = B[M], _ += K.r, 
        i += _, K.g = B[M + 1], j += K.g, p += j, K.b = B[M + 2], k += K.b, u += k, K.a = B[M + 3], 
        m += K.a, w += m, K = K.next, q = L.r, c += q, y = L.g, v += y, O = L.b, d += O, 
        P = L.a, C += P, _ -= q, j -= y, k -= O, m -= P, L = L.next, s += e;
    }
    return r;
};

var r = require("@babel/runtime/helpers/classCallCheck.js"), t = [ 512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259 ], a = [ 9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ], o = function t() {
    r(this, t), this.r = 0, this.g = 0, this.b = 0, this.a = 0, this.next = null;
};